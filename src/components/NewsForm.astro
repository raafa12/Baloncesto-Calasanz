---
// src/components/NewsForm.astro
const { tipo = 'contacto', asunto = 'Formulario web' } = Astro.props;

// Configuración común para todos los formularios
const EMAIL_DESTINO = "clubdeportivocalasanzsantander@hotmail.com";

// Define campos según el tipo de formulario
let camposFormulario = [];

if (tipo === 'inscripcion') {
  camposFormulario = [
    { nombre: "nombre", etiqueta: "Nombre y apellidos", tipo: "text", requerido: true },
    { nombre: "email", etiqueta: "Correo electrónico", tipo: "email", requerido: true },
    { nombre: "telefono", etiqueta: "Teléfono", tipo: "tel", requerido: true },
    { nombre: "fechaNacimiento", etiqueta: "Fecha de nacimiento", tipo: "date", requerido: true },
    { nombre: "comentarios", etiqueta: "Comentarios adicionales", tipo: "textarea", requerido: false }
  ];
} else {
  // Formulario de contacto por defecto
  camposFormulario = [
    { nombre: "nombre", etiqueta: "Nombre y apellidos", tipo: "text", requerido: true },
    { nombre: "email", etiqueta: "Correo electrónico", tipo: "email", requerido: true },
    { nombre: "mensaje", etiqueta: "Mensaje", tipo: "textarea", requerido: true }
  ];
}
---

<form 
  action={`https://formsubmit.co/${EMAIL_DESTINO}`} 
  method="POST" 
  class="bg-green-900 border border-green-700 rounded-xl p-6 space-y-4 mt-4"
>
  <!-- Configuración del formulario -->
  <input type="hidden" name="_captcha" value="false" />
  <input type="hidden" name="_subject" value={asunto} />
  <input type="hidden" name="_next" value={Astro.url.href} />
  
  <!-- Campos dinámicos según el tipo de formulario -->
  {camposFormulario.map(campo => (
    <label class="block">
      <span class="text-sm text-green-200">{campo.etiqueta}</span>
      {campo.tipo === 'textarea' ? (
        <textarea 
          name={campo.nombre} 
          rows="4" 
          required={campo.requerido} 
          class="w-full p-2 rounded bg-green-950 border border-green-700 text-white"
        ></textarea>
      ) : (
        <input 
          name={campo.nombre} 
          type={campo.tipo} 
          required={campo.requerido} 
          class="w-full p-2 rounded bg-green-950 border border-green-700 text-white" 
        />
      )}
    </label>
  ))}

  <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl transition-colors">
    {tipo === 'inscripcion' ? 'Enviar inscripción' : 'Enviar mensaje'}
  </button>
</form>
  
  