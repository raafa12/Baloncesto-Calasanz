---
// src/components/ResultadosJornada.astro
const { jornadaSeleccionada = "ultima" } = Astro.props;

// Base de datos con resultados de diferentes jornadas
// En un caso real, probablemente obtendrías estos datos de una API o base de datos
const jornadasData = {
  "ultima": {
    numero: 25,
    fecha: "14/04/2025",
    resultados: [
      {
        categoria: "Junior Masculino",
        local: "CB Calasanz",
        visitante: "CB Estudiantes",
        puntosLocal: 78,
        puntosVisitante: 65,
        fecha: "14/04/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Junior Femenino",
        local: "CB Fuenlabrada",
        visitante: "CB Calasanz",
        puntosLocal: 59,
        puntosVisitante: 67,
        fecha: "13/04/2025",
        pabellon: "Polideportivo Fuenlabrada"
      },
      {
        categoria: "Cadete Femenino",
        local: "CB Valdemoro",
        visitante: "CB Calasanz",
        puntosLocal: 54,
        puntosVisitante: 62,
        fecha: "13/04/2025",
        pabellon: "Pabellón Municipal Valdemoro"
      },
      {
        categoria: "Infantil Masculino",
        local: "CB Calasanz",
        visitante: "CB Alcalá",
        puntosLocal: 68,
        puntosVisitante: 72,
        fecha: "14/04/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Alevín Masculino",
        local: "CB Calasanz",
        visitante: "CB Leganés",
        puntosLocal: 45,
        puntosVisitante: 38,
        fecha: "14/04/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Benjamín Femenino",
        local: "CB Getafe",
        visitante: "CB Calasanz",
        puntosLocal: 32,
        puntosVisitante: 36,
        fecha: "13/04/2025",
        pabellon: "Polideportivo Getafe"
      }
    ]
  },
  "24": {
    numero: 24,
    fecha: "07/04/2025",
    resultados: [
      {
        categoria: "Junior Masculino",
        local: "CB Madrid",
        visitante: "CB Calasanz",
        puntosLocal: 62,
        puntosVisitante: 75,
        fecha: "07/04/2025",
        pabellon: "Pabellón Municipal Madrid"
      },
      {
        categoria: "Junior Femenino",
        local: "CB Calasanz",
        visitante: "CB Alcorcón",
        puntosLocal: 70,
        puntosVisitante: 64,
        fecha: "06/04/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Cadete Femenino",
        local: "CB Calasanz",
        visitante: "CB Móstoles",
        puntosLocal: 68,
        puntosVisitante: 55,
        fecha: "06/04/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Infantil Masculino",
        local: "CB Tres Cantos",
        visitante: "CB Calasanz",
        puntosLocal: 60,
        puntosVisitante: 58,
        fecha: "07/04/2025",
        pabellon: "Polideportivo Tres Cantos"
      },
      {
        categoria: "Alevín Masculino",
        local: "CB Pozuelo",
        visitante: "CB Calasanz",
        puntosLocal: 42,
        puntosVisitante: 50,
        fecha: "07/04/2025",
        pabellon: "Pabellón Pozuelo"
      },
      {
        categoria: "Benjamín Femenino",
        local: "CB Calasanz",
        visitante: "CB Parla",
        puntosLocal: 40,
        puntosVisitante: 28,
        fecha: "06/04/2025",
        pabellon: "Pabellón Calasanz"
      }
    ]
  },
  "23": {
    numero: 23,
    fecha: "31/03/2025",
    resultados: [
      {
        categoria: "Junior Masculino",
        local: "CB Calasanz",
        visitante: "CB Getafe",
        puntosLocal: 82,
        puntosVisitante: 70,
        fecha: "31/03/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Junior Femenino",
        local: "CB Leganés",
        visitante: "CB Calasanz",
        puntosLocal: 65,
        puntosVisitante: 67,
        fecha: "30/03/2025",
        pabellon: "Polideportivo Leganés"
      },
      {
        categoria: "Cadete Femenino",
        local: "CB Alcalá",
        visitante: "CB Calasanz",
        puntosLocal: 58,
        puntosVisitante: 64,
        fecha: "30/03/2025",
        pabellon: "Pabellón Municipal Alcalá"
      },
      {
        categoria: "Infantil Masculino",
        local: "CB Calasanz",
        visitante: "CB Fuenlabrada",
        puntosLocal: 75,
        puntosVisitante: 60,
        fecha: "31/03/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Alevín Masculino",
        local: "CB Calasanz",
        visitante: "CB Madrid",
        puntosLocal: 46,
        puntosVisitante: 42,
        fecha: "31/03/2025",
        pabellon: "Pabellón Calasanz"
      },
      {
        categoria: "Benjamín Femenino",
        local: "CB Móstoles",
        visitante: "CB Calasanz",
        puntosLocal: 36,
        puntosVisitante: 40,
        fecha: "30/03/2025",
        pabellon: "Polideportivo Móstoles"
      }
    ]
  }
};

// Obtener los resultados de la jornada seleccionada
const jornada = jornadasData[jornadaSeleccionada] || jornadasData["ultima"];

// Separar resultados por género
const resultadosMasculino = jornada.resultados.filter(r => r.categoria.includes("Masculino"));
const resultadosFemenino = jornada.resultados.filter(r => r.categoria.includes("Femenino"));

// Función para determinar si un equipo es ganador
const esGanador = (resultado, esLocal) => {
  if (esLocal) {
    return resultado.puntosLocal > resultado.puntosVisitante;
  } else {
    return resultado.puntosVisitante > resultado.puntosLocal;
  }
};

// Función para determinar si un equipo es CB Calasanz
const esCalasanz = (nombre) => nombre === "CB Calasanz";
---

<div class="resultados-jornada">
  <div class="mb-6 flex justify-between items-center">
    <h3 class="text-xl font-semibold text-green-300">Jornada {jornada.numero} - {jornada.fecha}</h3>
  </div>
  
  <!-- SECCIÓN MASCULINA -->
  <div class="mb-8">
    <div class="flex items-center mb-4 border-b border-green-700 pb-2">
      <div class="w-2 h-6 bg-blue-500 mr-3 rounded"></div>
      <h4 class="text-lg font-semibold text-white">Sección Masculina</h4>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {resultadosMasculino.map((resultado) => (
        <div class="bg-green-950 border border-green-800 rounded-xl overflow-hidden shadow-lg">
          <div class="bg-green-800/50 px-4 py-2 flex justify-between items-center">
            <span class="text-sm font-medium text-green-200">{resultado.categoria}</span>
            <span class="text-xs text-green-300">{resultado.fecha}</span>
          </div>
          
          <div class="p-4">
            <!-- Equipo Local -->
            <div class="flex justify-between items-center mb-2">
              <div class="flex items-center">
                <div class={`w-1 h-6 rounded-full mr-3 ${esCalasanz(resultado.local) ? "bg-green-400" : "bg-transparent"}`}></div>
                <span class={`font-medium ${esGanador(resultado, true) ? "text-white" : "text-gray-400"}`}>
                  {resultado.local}
                </span>
              </div>
              <span class={`text-2xl font-bold ${esGanador(resultado, true) ? "text-white" : "text-gray-400"}`}>
                {resultado.puntosLocal}
              </span>
            </div>
            
            <!-- Equipo Visitante -->
            <div class="flex justify-between items-center">
              <div class="flex items-center">
                <div class={`w-1 h-6 rounded-full mr-3 ${esCalasanz(resultado.visitante) ? "bg-green-400" : "bg-transparent"}`}></div>
                <span class={`font-medium ${esGanador(resultado, false) ? "text-white" : "text-gray-400"}`}>
                  {resultado.visitante}
                </span>
              </div>
              <span class={`text-2xl font-bold ${esGanador(resultado, false) ? "text-white" : "text-gray-400"}`}>
                {resultado.puntosVisitante}
              </span>
            </div>
            
            <!-- Pabellón -->
            <div class="mt-3 text-xs text-gray-400">
              <span>{resultado.pabellon}</span>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
  
  <!-- SECCIÓN FEMENINA -->
  <div>
    <div class="flex items-center mb-4 border-b border-green-700 pb-2">
      <div class="w-2 h-6 bg-pink-500 mr-3 rounded"></div>
      <h4 class="text-lg font-semibold text-white">Sección Femenina</h4>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {resultadosFemenino.map((resultado) => (
        <div class="bg-green-950 border border-green-800 rounded-xl overflow-hidden shadow-lg">
          <div class="bg-green-800/50 px-4 py-2 flex justify-between items-center">
            <span class="text-sm font-medium text-green-200">{resultado.categoria}</span>
            <span class="text-xs text-green-300">{resultado.fecha}</span>
          </div>
          
          <div class="p-4">
            <!-- Equipo Local -->
            <div class="flex justify-between items-center mb-2">
              <div class="flex items-center">
                <div class={`w-1 h-6 rounded-full mr-3 ${esCalasanz(resultado.local) ? "bg-green-400" : "bg-transparent"}`}></div>
                <span class={`font-medium ${esGanador(resultado, true) ? "text-white" : "text-gray-400"}`}>
                  {resultado.local}
                </span>
              </div>
              <span class={`text-2xl font-bold ${esGanador(resultado, true) ? "text-white" : "text-gray-400"}`}>
                {resultado.puntosLocal}
              </span>
            </div>
            
            <!-- Equipo Visitante -->
            <div class="flex justify-between items-center">
              <div class="flex items-center">
                <div class={`w-1 h-6 rounded-full mr-3 ${esCalasanz(resultado.visitante) ? "bg-green-400" : "bg-transparent"}`}></div>
                <span class={`font-medium ${esGanador(resultado, false) ? "text-white" : "text-gray-400"}`}>
                  {resultado.visitante}
                </span>
              </div>
              <span class={`text-2xl font-bold ${esGanador(resultado, false) ? "text-white" : "text-gray-400"}`}>
                {resultado.puntosVisitante}
              </span>
            </div>
            
            <!-- Pabellón -->
            <div class="mt-3 text-xs text-gray-400">
              <span>{resultado.pabellon}</span>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</div>